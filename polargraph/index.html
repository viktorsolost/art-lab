<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polargraph Controller (Art Lab)</title>
    <style>
        body { margin: 0; background: #222; color: #eee; font-family: monospace; display: flex; height: 100vh; overflow: hidden; }
        #canvas-container { flex: 1; position: relative; display: flex; justify-content: center; align-items: center; background: #1a1a1a; }
        canvas { background: #fff; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
        #controls { width: 300px; padding: 20px; background: #333; overflow-y: auto; border-left: 1px solid #444; }
        h1 { margin-top: 0; font-size: 1.2rem; color: #4af; }
        .control-group { margin-bottom: 20px; border-bottom: 1px solid #444; padding-bottom: 10px; }
        label { display: block; margin-bottom: 5px; color: #aaa; font-size: 0.9rem; }
        input[type="range"], input[type="number"], select { width: 100%; margin-bottom: 10px; background: #222; color: #fff; border: 1px solid #555; padding: 5px; }
        button { width: 100%; padding: 10px; background: #4af; color: #000; border: none; cursor: pointer; font-weight: bold; margin-bottom: 10px; transition: background 0.2s; }
        button:hover { background: #39e; }
        button.secondary { background: #555; color: #fff; }
        button.secondary:hover { background: #666; }
        .status { font-size: 0.8rem; color: #888; margin-top: 5px; }
        #gcode-preview { font-family: monospace; white-space: pre; font-size: 0.8rem; color: #0f0; background: #000; padding: 10px; height: 150px; overflow: auto; border: 1px solid #444; margin-top: 10px; }
    </style>
</head>
<body>
    <div id="canvas-container">
        <canvas id="plotterCanvas"></canvas>
    </div>
    <div id="controls">
        <h1>Polargraph Control</h1>
        
        <div class="control-group">
            <label>Connection</label>
            <button id="connectBtn" class="secondary">Connect via Serial (WebUSB)</button>
            <div id="connectionStatus" class="status">Disconnected</div>
        </div>

        <div class="control-group">
            <label>Drawing</label>
            <button id="uploadBtn">Upload Image (JPG/PNG/SVG)</button>
            <input type="file" id="fileInput" accept=".jpg, .jpeg, .png, .svg" style="display: none;">
            <button id="clearBtn" class="secondary">Clear Canvas</button>
        </div>

        <div class="control-group">
            <label>Machine Settings</label>
            <label>Width (mm)</label>
            <input type="number" id="machineWidth" value="1000">
            <label>Height (mm)</label>
            <input type="number" id="machineHeight" value="1000">
        </div>

        <div class="control-group">
            <label>Plot Control</label>
            <button id="plotBtn">Start Plot</button>
            <button id="pauseBtn" class="secondary">Pause</button>
            <button id="stopBtn" class="secondary" style="background: #e44;">Stop</button>
            <label>Speed</label>
            <input type="range" id="speed" min="1" max="100" value="50">
        </div>

        <div class="control-group">
            <label>G-Code Preview</label>
            <div id="gcode-preview">Waiting for commands...</div>
        </div>
        
        <div style="margin-top: auto; font-size: 0.8rem; color: #666; text-align: center;">
            <a href="../index.html" style="color: #666; text-decoration: none;">&larr; Back to Art Lab</a>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>